{
  "openapi": "3.1.0",
  "info": {
    "contact": {
      "email": "info@springonly.com",
      "name": "Equipo de Desarrollo de Spring Only"
    },
    "description": "API para información y gestión de créditos simples.",
    "license": {
      "name": "Apache 2.0",
      "url": "https://www.apache.org/licenses/LICENSE-2.0.html"
    },
    "title": "Credit API REST",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://backend.springonly.com",
      "description": "Servidor Spring Only"
    }
  ],
  "components": {
    "schemas": {
      "CreateCustomerRequest": {
        "type": "object",
        "properties": {
          "customerId": {
            "type": "string"
          },
          "customerName": {
            "type": "string"
          },
          "customerTypeId": {
            "type": "string"
          },
          "riskCategoryId": {
            "type": "string"
          },
          "lineOfCreditAmount": {
            "type": "number"
          },
          "relationshipManagerId": {
            "type": "string"
          }
        }
      },
      "CreateCustomerResponse": {
        "type": "object",
        "properties": {
          "customerId": {
            "type": "string"
          },
          "customerName": {
            "type": "string"
          },
          "customerTypeId": {
            "type": "string"
          },
          "riskCategoryId": {
            "type": "string"
          },
          "lineOfCreditAmount": {
            "type": "number"
          },
          "relationshipManagerId": {
            "type": "string"
          },
          "writtenAt": {
            "type": "string",
            "format": "date-time",
            "examples": [
              "2022-03-10T12:15:50-04:00"
            ]
          }
        }
      },
      "CreateLoanRequest": {
        "type": "object",
        "properties": {
          "customerId": {
            "type": "string"
          },
          "currencyId": {
            "type": "string"
          },
          "principalAmount": {
            "type": "number"
          },
          "interestRate": {
            "type": "number"
          },
          "loanDisbursementDate": {
            "type": "string",
            "format": "date",
            "examples": [
              "2022-03-10"
            ]
          },
          "numberOfMonthlyPayments": {
            "type": "integer",
            "format": "int16"
          }
        }
      },
      "CreateLoanResponse": {
        "type": "object",
        "properties": {
          "loanId": {
            "type": "integer",
            "format": "int32"
          },
          "customerId": {
            "type": "string"
          },
          "currencyId": {
            "type": "string"
          },
          "principalAmount": {
            "type": "number"
          },
          "interestRate": {
            "type": "number"
          },
          "loanDisbursementDate": {
            "type": "string",
            "format": "date",
            "examples": [
              "2022-03-10"
            ]
          },
          "numberOfMonthlyPayments": {
            "type": "integer",
            "format": "int16"
          },
          "loanStateId": {
            "type": "string"
          },
          "writtenAt": {
            "type": "string",
            "format": "date-time",
            "examples": [
              "2022-03-10T12:15:50-04:00"
            ]
          }
        }
      },
      "CreatePaymentRequest": {
        "type": "object",
        "properties": {
          "dueDate": {
            "type": "string",
            "format": "date",
            "examples": [
              "2022-03-10"
            ]
          },
          "principalAmount": {
            "type": "number"
          },
          "interestAmount": {
            "type": "number"
          }
        }
      },
      "CreatePaymentResponse": {
        "type": "object",
        "properties": {
          "loanId": {
            "type": "integer",
            "format": "int32"
          },
          "paymentNumber": {
            "type": "integer",
            "format": "int16"
          },
          "dueDate": {
            "type": "string",
            "format": "date",
            "examples": [
              "2022-03-10"
            ]
          },
          "principalAmount": {
            "type": "number"
          },
          "interestAmount": {
            "type": "number"
          },
          "totalPaymentAmount": {
            "type": "number"
          },
          "paymentStateId": {
            "type": "string"
          },
          "writtenAt": {
            "type": "string",
            "format": "date-time",
            "examples": [
              "2022-03-10T12:15:50-04:00"
            ]
          }
        }
      },
      "CustomerResource": {
        "type": "object",
        "description": "Handles customer-related operations such as:\n  - Creating new customers\n  - Updating existing customers\n  - Retrieving customer details\n  - Listing loans associated with a customer\n",
        "properties": {
          "customerService": {
            "type": "object"
          },
          "customerMapper": {
            "type": "object"
          },
          "loanService": {
            "type": "object"
          },
          "loanMapper": {
            "type": "object"
          },
          "headerRelationshipManagerId": {
            "type": "string"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string"
          },
          "code": {
            "type": "string"
          }
        }
      },
      "GetCustomerByIdResponse": {
        "type": "object",
        "properties": {
          "customerId": {
            "type": "string"
          },
          "customerName": {
            "type": "string"
          },
          "customerTypeId": {
            "type": "string"
          },
          "riskCategoryId": {
            "type": "string"
          },
          "lineOfCreditAmount": {
            "type": "number"
          },
          "relationshipManagerId": {
            "type": "string"
          },
          "writtenAt": {
            "type": "string",
            "format": "date-time",
            "examples": [
              "2022-03-10T12:15:50-04:00"
            ]
          }
        }
      },
      "GetLoanByIdResponse": {
        "type": "object",
        "properties": {
          "loanId": {
            "type": "integer",
            "format": "int32"
          },
          "customerId": {
            "type": "string"
          },
          "currencyId": {
            "type": "string"
          },
          "principalAmount": {
            "type": "number"
          },
          "interestRate": {
            "type": "number"
          },
          "loanDisbursementDate": {
            "type": "string",
            "format": "date",
            "examples": [
              "2022-03-10"
            ]
          },
          "numberOfMonthlyPayments": {
            "type": "integer",
            "format": "int16"
          },
          "loanStateId": {
            "type": "string"
          },
          "writtenAt": {
            "type": "string",
            "format": "date-time",
            "examples": [
              "2022-03-10T12:15:50-04:00"
            ]
          }
        }
      },
      "GetPaymentByIdResponse": {
        "type": "object",
        "properties": {
          "loanId": {
            "type": "integer",
            "format": "int32"
          },
          "paymentNumber": {
            "type": "integer",
            "format": "int16"
          },
          "dueDate": {
            "type": "string",
            "format": "date",
            "examples": [
              "2022-03-10"
            ]
          },
          "principalAmount": {
            "type": "number"
          },
          "interestAmount": {
            "type": "number"
          },
          "totalPaymentAmount": {
            "type": "number"
          },
          "paymentStateId": {
            "type": "string"
          },
          "writtenAt": {
            "type": "string",
            "format": "date-time",
            "examples": [
              "2022-03-10T12:15:50-04:00"
            ]
          }
        }
      },
      "GetRelationshipManagerByIdResponse": {
        "type": "object",
        "properties": {
          "relationshipManagerId": {
            "type": "string"
          },
          "relationshipManagerName": {
            "type": "string"
          },
          "threadId": {
            "type": "string"
          },
          "writtenAt": {
            "type": "string",
            "format": "date-time",
            "examples": [
              "2022-03-10T12:15:50-04:00"
            ]
          }
        }
      },
      "LoanResource": {
        "type": "object",
        "description": "Handles loan-related operations such as:\n  - Creating new loans for customers\n  - Updating existing loans\n  - Retrieving loan details by ID\n",
        "properties": {
          "loanService": {
            "type": "object"
          },
          "loanMapper": {
            "type": "object"
          },
          "headerRelationshipManagerId": {
            "type": "string"
          }
        }
      },
      "LoginRelationshipManagerRequest": {
        "type": "object",
        "properties": {
          "relationshipManagerId": {
            "type": "string"
          },
          "password": {
            "type": "string"
          }
        }
      },
      "LoginRelationshipManagerResponse": {
        "type": "object",
        "properties": {
          "relationshipManagerId": {
            "type": "string"
          },
          "relationshipManagerName": {
            "type": "string"
          },
          "threadId": {
            "type": "string"
          },
          "writtenAt": {
            "type": "string",
            "format": "date-time",
            "examples": [
              "2022-03-10T12:15:50-04:00"
            ]
          }
        }
      },
      "PaymentResource": {
        "type": "object",
        "description": "Handles payment-related operations such as:\n  - Creating payments for a loan\n  - Updating existing payments\n  - Listing payments for a specific loan\n  - Retrieving a payment by loanId and paymentNumber\n",
        "properties": {
          "paymentService": {
            "type": "object"
          },
          "paymentMapper": {
            "type": "object"
          },
          "headerRelationshipManagerId": {
            "type": "string"
          }
        }
      },
      "RelationshipManagerResource": {
        "type": "object",
        "description": "Handles relationship-manager related operations such as:\n  - Authenticating relationship managers\n  - Updating thread id information\n  - Retrieving relationship manager details\n  - Listing customers assigned to a relationship manager\n",
        "properties": {
          "relationshipManagerService": {
            "type": "object"
          },
          "relationshipManagerMapper": {
            "type": "object"
          },
          "customerService": {
            "type": "object"
          },
          "customerMapper": {
            "type": "object"
          },
          "headerRelationshipManagerId": {
            "type": "string"
          }
        }
      },
      "UpdateCustomerRequest": {
        "type": "object",
        "properties": {
          "customerName": {
            "type": "string"
          },
          "customerTypeId": {
            "type": "string"
          },
          "riskCategoryId": {
            "type": "string"
          },
          "lineOfCreditAmount": {
            "type": "number"
          },
          "relationshipManagerId": {
            "type": "string"
          }
        }
      },
      "UpdateCustomerResponse": {
        "type": "object",
        "properties": {
          "customerId": {
            "type": "string"
          },
          "customerName": {
            "type": "string"
          },
          "customerTypeId": {
            "type": "string"
          },
          "riskCategoryId": {
            "type": "string"
          },
          "lineOfCreditAmount": {
            "type": "number"
          },
          "relationshipManagerId": {
            "type": "string"
          },
          "writtenAt": {
            "type": "string",
            "format": "date-time",
            "examples": [
              "2022-03-10T12:15:50-04:00"
            ]
          }
        }
      },
      "UpdateLoanRequest": {
        "type": "object",
        "properties": {
          "loanStateId": {
            "type": "string"
          }
        }
      },
      "UpdateLoanResponse": {
        "type": "object",
        "properties": {
          "loanId": {
            "type": "integer",
            "format": "int32"
          },
          "customerId": {
            "type": "string"
          },
          "currencyId": {
            "type": "string"
          },
          "principalAmount": {
            "type": "number"
          },
          "interestRate": {
            "type": "number"
          },
          "loanDisbursementDate": {
            "type": "string",
            "format": "date",
            "examples": [
              "2022-03-10"
            ]
          },
          "numberOfMonthlyPayments": {
            "type": "integer",
            "format": "int16"
          },
          "loanStateId": {
            "type": "string"
          },
          "writtenAt": {
            "type": "string",
            "format": "date-time",
            "examples": [
              "2022-03-10T12:15:50-04:00"
            ]
          }
        }
      },
      "UpdatePaymentRequest": {
        "type": "object",
        "properties": {
          "paymentStateId": {
            "type": "string"
          }
        }
      },
      "UpdatePaymentResponse": {
        "type": "object",
        "properties": {
          "loanId": {
            "type": "integer",
            "format": "int32"
          },
          "paymentNumber": {
            "type": "integer",
            "format": "int16"
          },
          "dueDate": {
            "type": "string",
            "format": "date",
            "examples": [
              "2022-03-10"
            ]
          },
          "principalAmount": {
            "type": "number"
          },
          "interestAmount": {
            "type": "number"
          },
          "totalPaymentAmount": {
            "type": "number"
          },
          "paymentStateId": {
            "type": "string"
          },
          "writtenAt": {
            "type": "string",
            "format": "date-time",
            "examples": [
              "2022-03-10T12:15:50-04:00"
            ]
          }
        }
      },
      "UpdateRelationshipManagerThreadIdRequest": {
        "type": "object",
        "properties": {
          "threadId": {
            "type": "string",
            "format": "uuid",
            "pattern": "[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}"
          }
        }
      },
      "UpdateRelationshipManagerThreadIdResponse": {
        "type": "object",
        "properties": {
          "relationshipManagerId": {
            "type": "string"
          },
          "relationshipManagerName": {
            "type": "string"
          },
          "threadId": {
            "type": "string"
          },
          "writtenAt": {
            "type": "string",
            "format": "date-time",
            "examples": [
              "2022-03-10T12:15:50-04:00"
            ]
          }
        }
      }
    }
  },
  "paths": {
    "/api/customers": {
      "parameters": [
        {
          "name": "X-RelationshipManager-Id",
          "in": "header",
          "schema": {
            "type": "string"
          }
        }
      ],
      "post": {
        "summary": "Create customer",
        "description": "Create a new customer and return its created representation.",
        "operationId": "createCustomer",
        "requestBody": {
          "description": "Request payload for creating a new customer.",
          "content": {
            "application/json": {
              "examples": {
                "Create customer request": {
                  "summary": "A valid request to create a customer",
                  "value": {
                    "customerId": "CUST12345",
                    "customerName": "John Doe",
                    "customerTypeId": "MICRO EMPRESA",
                    "riskCategoryId": "NO",
                    "lineOfCreditAmount": 50000.0,
                    "relationshipManagerId": "RM001"
                  }
                }
              },
              "schema": {
                "$ref": "#/components/schemas/CreateCustomerRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Customer created successfully",
            "content": {
              "application/json": {
                "examples": {
                  "Successful creation": {
                    "summary": "A successfully created customer",
                    "value": {
                      "customerId": "CUST12345",
                      "customerName": "John Doe",
                      "customerTypeId": "MICRO EMPRESA",
                      "riskCategoryId": "NO",
                      "lineOfCreditAmount": 50000.0,
                      "relationshipManagerId": "RM001",
                      "writtenAt": "2025-10-07T22:27:36-05:00"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/CreateCustomerResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "examples": {
                  "Invalid input": {
                    "summary": "An example of invalid input data",
                    "value": {
                      "message": "Invalid input data",
                      "code": "ERR400"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "Customer Resource"
        ]
      }
    },
    "/api/customers/{customerId}": {
      "parameters": [
        {
          "name": "X-RelationshipManager-Id",
          "in": "header",
          "schema": {
            "type": "string"
          }
        }
      ],
      "patch": {
        "summary": "Update customer",
        "description": "Update customer data identified by customerId.",
        "operationId": "updateCustomer",
        "parameters": [
          {
            "name": "customerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Request payload for updating a customer.",
          "content": {
            "application/json": {
              "examples": {
                "Update customer request": {
                  "summary": "A valid request to update a customer",
                  "value": {
                    "customerName": "John Doe Updated",
                    "customerTypeId": "MICRO EMPRESA",
                    "riskCategoryId": "NO",
                    "lineOfCreditAmount": 60000.0,
                    "relationshipManagerId": "RM001"
                  }
                }
              },
              "schema": {
                "$ref": "#/components/schemas/UpdateCustomerRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Customer updated successfully",
            "content": {
              "application/json": {
                "examples": {
                  "Successful update": {
                    "summary": "A successfully updated customer",
                    "value": {
                      "customerId": "CUST12345",
                      "customerName": "John Doe Updated",
                      "customerTypeId": "MICRO EMPRESA",
                      "riskCategoryId": "PP",
                      "lineOfCreditAmount": 60000.0,
                      "relationshipManagerId": "RM001",
                      "writtenAt": "2025-10-07T22:27:36-05:00"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/UpdateCustomerResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "examples": {
                  "Invalid input": {
                    "summary": "An example of invalid input data",
                    "value": {
                      "message": "Invalid input data",
                      "code": "ERR400"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Customer not found",
            "content": {
              "application/json": {
                "examples": {
                  "Customer not found": {
                    "summary": "An example of a non-existent customer",
                    "value": {
                      "message": "Customer not found",
                      "code": "ERR404"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "Customer Resource"
        ]
      },
      "get": {
        "summary": "Get customer by id",
        "description": "Retrieve customer details by customerId.",
        "operationId": "getCustomerById",
        "parameters": [
          {
            "name": "customerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Customer retrieved successfully",
            "content": {
              "application/json": {
                "examples": {
                  "Customer details": {
                    "summary": "Details of an existing customer",
                    "value": {
                      "customerId": "CUST12345",
                      "customerName": "John Doe",
                      "customerTypeId": "MICRO EMPRESA",
                      "riskCategoryId": "DU",
                      "lineOfCreditAmount": 50000.0,
                      "relationshipManagerId": "RM001",
                      "writtenAt": "2024-12-14T19:37:26-05:00"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/GetCustomerByIdResponse"
                }
              }
            }
          },
          "404": {
            "description": "Customer not found",
            "content": {
              "application/json": {
                "examples": {
                  "Customer not found": {
                    "summary": "An example of a non-existent customer",
                    "value": {
                      "message": "Customer not found",
                      "code": "ERR404"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "Customer Resource"
        ]
      }
    },
    "/api/customers/{customerId}/loans": {
      "parameters": [
        {
          "name": "X-RelationshipManager-Id",
          "in": "header",
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "summary": "List loans by customer",
        "description": "List loans associated with the specified customerId.",
        "operationId": "listLoansByCustomerId",
        "parameters": [
          {
            "name": "customerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Loans list for customer",
            "content": {
              "application/json": {
                "examples": {
                  "Customer loans": {
                    "summary": "A list of loans for a customer",
                    "value": [
                      {
                        "loanId": 1,
                        "customerId": "CUST12345",
                        "currencyId": "PEN",
                        "principalAmount": 10000.0,
                        "interestRate": 5.5,
                        "loanDisbursementDate": "2023-01-01",
                        "numberOfMonthlyPayments": 12,
                        "loanStateId": "VIGENTE",
                        "writtenAt": "2025-09-28T11:15:00-05:00"
                      },
                      {
                        "loanId": 2,
                        "customerId": "CUST12345",
                        "currencyId": "USD",
                        "principalAmount": 20000.0,
                        "interestRate": 6.0,
                        "loanDisbursementDate": "2023-02-01",
                        "numberOfMonthlyPayments": 24,
                        "loanStateId": "DESAPROBADO",
                        "writtenAt": "2025-08-30T03:49:02-05:00"
                      }
                    ]
                  }
                },
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GetLoanByIdResponse"
                  }
                }
              }
            }
          },
          "404": {
            "description": "No loans found for customer",
            "content": {
              "application/json": {
                "examples": {
                  "No loans found": {
                    "summary": "An example of a customer with no loans",
                    "value": {
                      "message": "No loans found for customer",
                      "code": "ERR404"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "Customer Resource"
        ]
      }
    },
    "/api/loans": {
      "parameters": [
        {
          "name": "X-RelationshipManager-Id",
          "in": "header",
          "schema": {
            "type": "string"
          }
        }
      ],
      "post": {
        "summary": "Create a new loan",
        "description": "Creates a loan for a customer. Requires a CreateLoanRequest payload with the necessary loan data.",
        "operationId": "createLoan",
        "requestBody": {
          "description": "CreateLoanRequest payload",
          "content": {
            "application/json": {
              "examples": {
                "Create loan example": {
                  "summary": "Request to create a loan",
                  "value": {
                    "customerId": "CUST12345",
                    "currencyId": "PEN",
                    "principalAmount": 10000.0,
                    "interestRate": 5.5,
                    "loanDisbursementDate": "2025-09-01",
                    "numberOfMonthlyPayments": 36
                  }
                }
              },
              "schema": {
                "$ref": "#/components/schemas/CreateLoanRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Loan created successfully",
            "content": {
              "application/json": {
                "examples": {
                  "CreateLoanResponse example": {
                    "summary": "Created loan representation",
                    "value": {
                      "loanId": 12345,
                      "customerId": "CUST12345",
                      "currencyId": "PEN",
                      "principalAmount": 10000.0,
                      "interestRate": 5.5,
                      "loanDisbursementDate": "2025-09-01",
                      "numberOfMonthlyPayments": 36,
                      "loanStateId": "EN EVALUACION",
                      "writtenAt": "2025-10-07T22:57:09-05:00"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/CreateLoanResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "examples": {
                  "CreateLoan error": {
                    "summary": "Invalid input example",
                    "value": {
                      "message": "principalAmount must be greater than 0",
                      "code": "INVALID_REQUEST"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "Loan Resource"
        ]
      }
    },
    "/api/loans/{loanId}": {
      "parameters": [
        {
          "name": "X-RelationshipManager-Id",
          "in": "header",
          "schema": {
            "type": "string"
          }
        }
      ],
      "patch": {
        "summary": "Update an existing loan",
        "description": "Updates loan fields for the given loanId using UpdateLoanRequest.",
        "operationId": "updateLoan",
        "parameters": [
          {
            "name": "loanId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "requestBody": {
          "description": "UpdateLoanRequest payload",
          "content": {
            "application/json": {
              "examples": {
                "Update loan example": {
                  "summary": "Request to update a loan state",
                  "value": {
                    "loanStateId": "VIGENTE"
                  }
                }
              },
              "schema": {
                "$ref": "#/components/schemas/UpdateLoanRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Loan updated successfully",
            "content": {
              "application/json": {
                "examples": {
                  "UpdateLoanResponse example": {
                    "summary": "Updated loan representation",
                    "value": {
                      "loanId": 12345,
                      "customerId": "CUST12345",
                      "currencyId": "USD",
                      "principalAmount": 10000.0,
                      "interestRate": 5.5,
                      "loanDisbursementDate": "2025-09-01",
                      "numberOfMonthlyPayments": 36,
                      "loanStateId": "VIGENTE",
                      "writtenAt": "2025-10-07T23:05:32-05:00"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/UpdateLoanResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "examples": {
                  "UpdateLoan error": {
                    "summary": "Invalid update example",
                    "value": {
                      "message": "Invalid update data",
                      "code": "INVALID_UPDATE"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Loan not found",
            "content": {
              "application/json": {
                "examples": {
                  "UpdateLoan not found": {
                    "summary": "Loan to update was not found",
                    "value": {
                      "message": "El préstamo indicado no existe",
                      "code": "LN002"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "Loan Resource"
        ]
      },
      "get": {
        "summary": "Get loan by ID",
        "description": "Retrieves the loan details for the provided loanId.",
        "operationId": "getLoanById",
        "parameters": [
          {
            "name": "loanId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Loan retrieved successfully",
            "content": {
              "application/json": {
                "examples": {
                  "GetLoanByIdResponse example": {
                    "summary": "A loan retrieved by id",
                    "value": {
                      "loanId": 12345,
                      "customerId": "CUST12345",
                      "currencyId": "PEN",
                      "principalAmount": 10000.0,
                      "interestRate": 5.5,
                      "loanDisbursementDate": "2025-09-01",
                      "numberOfMonthlyPayments": 36,
                      "loanStateId": "VIGENTE",
                      "writtenAt": "2025-09-16T15:45:00-05:00"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/GetLoanByIdResponse"
                }
              }
            }
          },
          "404": {
            "description": "Loan not found",
            "content": {
              "application/json": {
                "examples": {
                  "GetLoanById error": {
                    "summary": "Loan not found example",
                    "value": {
                      "message": "El préstamo indicado no existe",
                      "code": "LN003"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "Loan Resource"
        ]
      }
    },
    "/api/loans/{loanId}/payments": {
      "parameters": [
        {
          "name": "X-RelationshipManager-Id",
          "in": "header",
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "summary": "List payments",
        "description": "List all payments associated to a given loan.",
        "operationId": "listPaymentsByLoanId",
        "parameters": [
          {
            "name": "loanId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Payments list for loan",
            "content": {
              "application/json": {
                "examples": {
                  "Payments list": {
                    "summary": "A list of payments for a loan",
                    "value": [
                      {
                        "loanId": 12345,
                        "paymentNumber": 1,
                        "dueDate": "2025-10-15",
                        "principalAmount": 500.0,
                        "interestAmount": 5.0,
                        "totalPaymentAmount": 505.0,
                        "paymentStateId": "PAGADO",
                        "writtenAt": "2025-08-16T13:25:00-05:00"
                      },
                      {
                        "loanId": 12345,
                        "paymentNumber": 2,
                        "dueDate": "2025-11-15",
                        "principalAmount": 500.0,
                        "interestAmount": 4.5,
                        "totalPaymentAmount": 504.5,
                        "paymentStateId": "PENDIENTE",
                        "writtenAt": "2025-07-16T11:15:00-05:00"
                      }
                    ]
                  }
                },
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GetPaymentByIdResponse"
                  }
                }
              }
            }
          },
          "404": {
            "description": "No payments found for loan",
            "content": {
              "application/json": {
                "examples": {
                  "No payments found": {
                    "summary": "No payments for given loan",
                    "value": {
                      "message": "El préstamo no tiene pagos registrados",
                      "code": "PAY002"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "Payment Resource"
        ]
      }
    },
    "/api/loans/{loanId}/payments/{paymentNumber}": {
      "parameters": [
        {
          "name": "X-RelationshipManager-Id",
          "in": "header",
          "schema": {
            "type": "string"
          }
        }
      ],
      "patch": {
        "summary": "Update payment",
        "description": "Update an existing payment for a loan identified by loanId and paymentNumber.",
        "operationId": "updatePayment",
        "parameters": [
          {
            "name": "loanId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "paymentNumber",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int16"
            }
          }
        ],
        "requestBody": {
          "description": "UpdatePaymentRequest payload",
          "content": {
            "application/json": {
              "examples": {
                "UpdatePayment request": {
                  "summary": "Request to update payment state",
                  "value": {
                    "paymentStateId": "PAGADO"
                  }
                }
              },
              "schema": {
                "$ref": "#/components/schemas/UpdatePaymentRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Payment updated successfully",
            "content": {
              "application/json": {
                "examples": {
                  "UpdatePaymentResponse example": {
                    "summary": "Updated payment representation",
                    "value": {
                      "loanId": 12345,
                      "paymentNumber": 1,
                      "dueDate": "2025-10-15",
                      "principalAmount": 500.0,
                      "interestAmount": 5.0,
                      "totalPaymentAmount": 505.0,
                      "paymentStateId": "PAGADO",
                      "writtenAt": "2025-09-16T15:45:00-05:00"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/UpdatePaymentResponse"
                }
              }
            }
          },
          "404": {
            "description": "Payment not found",
            "content": {
              "application/json": {
                "examples": {
                  "UpdatePayment not found": {
                    "summary": "Payment to update was not found",
                    "value": {
                      "message": "El pago indicado no existe para este préstamo",
                      "code": "PAY404"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "Payment Resource"
        ]
      },
      "get": {
        "summary": "Get payment by id",
        "description": "Retrieve a specific payment for a loan by loanId and paymentNumber.",
        "operationId": "getPaymentById",
        "parameters": [
          {
            "name": "loanId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "paymentNumber",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int16"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Payment retrieved successfully",
            "content": {
              "application/json": {
                "examples": {
                  "GetPaymentByIdResponse example": {
                    "summary": "A payment retrieved by id",
                    "value": {
                      "loanId": 12345,
                      "paymentNumber": 1,
                      "dueDate": "2025-10-15",
                      "principalAmount": 500.0,
                      "interestAmount": 5.0,
                      "totalPaymentAmount": 505.0,
                      "paymentStateId": "PAGADO",
                      "writtenAt": "2025-09-16T15:45:00-05:00"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/GetPaymentByIdResponse"
                }
              }
            }
          },
          "404": {
            "description": "Payment not found",
            "content": {
              "application/json": {
                "examples": {
                  "GetPaymentById not found": {
                    "summary": "Requested payment does not exist",
                    "value": {
                      "message": "El pago solicitado no existe",
                      "code": "PAY003"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "Payment Resource"
        ]
      },
      "post": {
        "summary": "Create payment",
        "description": "Create a payment for a specific loan and payment number.",
        "operationId": "createPayment",
        "parameters": [
          {
            "name": "loanId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "paymentNumber",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int16"
            }
          }
        ],
        "requestBody": {
          "description": "CreatePaymentRequest payload",
          "content": {
            "application/json": {
              "examples": {
                "CreatePayment request": {
                  "summary": "Request to create a payment",
                  "value": {
                    "dueDate": "2025-10-15",
                    "principalAmount": 500.0,
                    "interestAmount": 5.0
                  }
                }
              },
              "schema": {
                "$ref": "#/components/schemas/CreatePaymentRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Payment created successfully",
            "content": {
              "application/json": {
                "examples": {
                  "CreatePaymentResponse example": {
                    "summary": "Created payment representation",
                    "value": {
                      "loanId": 12345,
                      "paymentNumber": 1,
                      "dueDate": "2025-10-15",
                      "principalAmount": 500.0,
                      "interestAmount": 5.0,
                      "totalPaymentAmount": 505.0,
                      "paymentStateId": "PENDIENTE",
                      "writtenAt": "2025-09-16T15:45:00-05:00"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/CreatePaymentResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "examples": {
                  "CreatePayment error": {
                    "summary": "Invalid create payment input",
                    "value": {
                      "message": "Invalid input data",
                      "code": "PAY400"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "Payment Resource"
        ]
      }
    },
    "/api/relationship-managers/login": {
      "parameters": [
        {
          "name": "X-RelationshipManager-Id",
          "in": "header",
          "schema": {
            "type": "string"
          }
        }
      ],
      "post": {
        "summary": "Login relationship manager",
        "description": "Authenticate a relationship manager and return session or token details.",
        "operationId": "loginRelationshipManager",
        "requestBody": {
          "description": "LoginRelationshipManagerRequest payload",
          "content": {
            "application/json": {
              "examples": {
                "Login request": {
                  "summary": "Request to authenticate a relationship manager",
                  "value": {
                    "relationshipManagerId": "RM001",
                    "password": "s3cr3t"
                  }
                }
              },
              "schema": {
                "$ref": "#/components/schemas/LoginRelationshipManagerRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "examples": {
                  "Login successful": {
                    "summary": "Authenticated relationship manager response",
                    "value": {
                      "relationshipManagerId": "RM001",
                      "relationshipManagerName": "Ana Pérez",
                      "threadId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
                      "writtenAt": "2025-10-07T22:27:36-05:00"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/LoginRelationshipManagerResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "examples": {
                  "Unauthorized login": {
                    "summary": "Invalid credentials example",
                    "value": {
                      "message": "Usuario y/o password incorrectos",
                      "code": "RM001"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request"
          }
        },
        "tags": [
          "Relationship Manager Resource"
        ]
      }
    },
    "/api/relationship-managers/{relationshipManagerId}": {
      "parameters": [
        {
          "name": "X-RelationshipManager-Id",
          "in": "header",
          "schema": {
            "type": "string"
          }
        }
      ],
      "patch": {
        "summary": "Update thread id",
        "description": "Update the thread id information for a relationship manager.",
        "operationId": "updateRelationshipManagerThreadId",
        "parameters": [
          {
            "name": "relationshipManagerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "UpdateRelationshipManagerThreadIdRequest payload",
          "content": {
            "application/json": {
              "examples": {
                "Update thread id request": {
                  "summary": "Request to update relationship manager thread id",
                  "value": {
                    "threadId": "3fa85f64-5717-4562-b3fc-2c963f66afa6"
                  }
                }
              },
              "schema": {
                "$ref": "#/components/schemas/UpdateRelationshipManagerThreadIdRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Relationship manager thread id updated",
            "content": {
              "application/json": {
                "examples": {
                  "Update thread id success": {
                    "summary": "Updated relationship manager thread id response",
                    "value": {
                      "relationshipManagerId": "RM001",
                      "relationshipManagerName": "Ana Pérez",
                      "threadId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
                      "writtenAt": "2025-10-07T22:27:36-05:00"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/UpdateRelationshipManagerThreadIdResponse"
                }
              }
            }
          },
          "404": {
            "description": "Relationship manager not found",
            "content": {
              "application/json": {
                "examples": {
                  "Update thread id not found": {
                    "summary": "Relationship manager not found example",
                    "value": {
                      "message": "El Ejecutivo de Cuenta indicado no existe",
                      "code": "RM002"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "Relationship Manager Resource"
        ]
      },
      "get": {
        "summary": "Get relationship manager",
        "description": "Retrieve relationship manager details by id.",
        "operationId": "getRelationshipManagerById",
        "parameters": [
          {
            "name": "relationshipManagerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Relationship manager retrieved successfully",
            "content": {
              "application/json": {
                "examples": {
                  "GetRelationshipManagerByIdResponse example": {
                    "summary": "A relationship manager retrieved by id",
                    "value": {
                      "relationshipManagerId": "RM001",
                      "relationshipManagerName": "Ana Pérez",
                      "threadId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
                      "writtenAt": "2025-10-07T22:27:36-05:00"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/GetRelationshipManagerByIdResponse"
                }
              }
            }
          },
          "404": {
            "description": "Relationship manager not found",
            "content": {
              "application/json": {
                "examples": {
                  "GetRelationshipManager not found": {
                    "summary": "Requested relationship manager does not exist",
                    "value": {
                      "message": "El Ejecutivo de Cuenta indicado no existe",
                      "code": "RM003"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "Relationship Manager Resource"
        ]
      }
    },
    "/api/relationship-managers/{relationshipManagerId}/customers": {
      "parameters": [
        {
          "name": "X-RelationshipManager-Id",
          "in": "header",
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "summary": "List customers",
        "description": "List customers assigned to a specific relationship manager.",
        "operationId": "listCustomersByRelationshipManagerById",
        "parameters": [
          {
            "name": "relationshipManagerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Customers list for relationship manager",
            "content": {
              "application/json": {
                "examples": {
                  "Customers list": {
                    "summary": "A list of customers for a relationship manager",
                    "value": [
                      {
                        "customerId": "CUST12345",
                        "customerName": "John Doe",
                        "customerTypeId": "MICRO EMPRESA",
                        "riskCategoryId": "DU",
                        "lineOfCreditAmount": 50000.0,
                        "relationshipManagerId": "RM001",
                        "writtenAt": "2024-12-14T19:37:26-05:00"
                      },
                      {
                        "customerId": "CUST67890",
                        "customerName": "María López",
                        "customerTypeId": "PERSONAL",
                        "riskCategoryId": "PP",
                        "lineOfCreditAmount": 15000.0,
                        "relationshipManagerId": "RM001",
                        "writtenAt": "2025-01-20T15:00:00-05:00"
                      }
                    ]
                  }
                },
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GetCustomerByIdResponse"
                  }
                }
              }
            }
          },
          "404": {
            "description": "No customers found for relationship manager",
            "content": {
              "application/json": {
                "examples": {
                  "No customers found": {
                    "summary": "No customers for given relationship manager",
                    "value": {
                      "message": "El Ejecutivo de Cuentas no tiene clientes asignados",
                      "code": "RM002"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "Relationship Manager Resource"
        ]
      }
    }
  }
}